{
    "title": "TestPlanSchema",
    "description": "Defines the schema for the Test Plan.",
    "type": "object",
    "properties": {
        "description": {
            "description": "Description of the Test performed in this test plan",
            "default": "",
            "type": "string"
        },
        "verification": {
            "description": "List of verification configurations that will be executed to verify the system is in favorable condition",
            "default": [],
            "type": "array",
            "items": {
                "$ref": "#/definitions/VerificationConfig"
            }
        }
    },
    "$schema": "https://json-schema.org/draft-07/schema",
    "$id": "https://resilience.yahoo.com/schema.json",
    "definitions": {
        "SystemState": {
            "title": "SystemState",
            "description": "An enumeration.",
            "enum": [
                "STEADY",
                "CHAOS",
                "RECOVERED"
            ]
        },
        "VerificationType": {
            "title": "VerificationType",
            "description": "Defines the Type of plugin to be used for verification.",
            "enum": [
                "python_module"
            ]
        },
        "VerificationConfig": {
            "title": "VerificationConfig",
            "description": "The verification configuration that is executed during some state of the system\nto verify the system is in a favorable conditions or not.",
            "type": "object",
            "properties": {
                "delay_before": {
                    "description": "delay (in ms) to be introduced before running this plugin",
                    "default": 0,
                    "type": "number"
                },
                "delay_after": {
                    "description": "delay (in ms) to be introduced after running this plugin",
                    "default": 0,
                    "type": "number"
                },
                "states": {
                    "description": "A system state or a list of system states in which this verification plugin should be executed.",
                    "anyOf": [
                        {
                            "$ref": "#/definitions/SystemState"
                        },
                        {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/SystemState"
                            }
                        }
                    ]
                },
                "type": {
                    "description": "The verification type to be used.",
                    "allOf": [
                        {
                            "$ref": "#/definitions/VerificationType"
                        }
                    ]
                },
                "config": {
                    "description": "The verification type configuration",
                    "type": "object"
                }
            },
            "required": [
                "states",
                "type",
                "config"
            ]
        }
    }
}
